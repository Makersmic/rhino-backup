
[gcode_macro LEDOFF]
gcode:  
  SET_PIN PIN=Umbilical_LED VALUE=0

[gcode_macro LEDMIN]
gcode:  
  SET_PIN PIN=Umbilical_LED VALUE=.5

[gcode_macro LEDMAX]
gcode:  
  SET_PIN PIN=Umbilical_LED VALUE=1

[gcode_macro LEDFLASH]
description: Flashes the specified LED for visual feedback
gcode:
  {% set led_pin = params.LED_PIN|default("Umbilical_LED") %}
  {% if led_pin not in printer %}
    RESPOND TYPE=error MSG="LED pin {led_pin} not found"
    { action_raise_error("Invalid LED pin") }
  {% endif %}
  {% for i in range(5) %}
    SET_PIN PIN={led_pin} VALUE=1.00
    G4 P300
    SET_PIN PIN={led_pin} VALUE=0.00
    G4 P300
  {% endfor %}
  SET_PIN PIN={led_pin} VALUE=0.00 ; Ensure LED is off

[gcode_macro LEDFLASHFAST]
gcode:
  SET_PIN PIN=Umbilical_LED VALUE=1.00
  G4 P150
  SET_PIN PIN=Umbilical_LED VALUE=0.00
  G4 P150
  SET_PIN PIN=Umbilical_LED VALUE=1.00
  G4 P150
  SET_PIN PIN=Umbilical_LED VALUE=0.00
  G4 P150
  SET_PIN PIN=Umbilical_LED VALUE=1.00
  G4 P150
  SET_PIN PIN=Umbilical_LED VALUE=0.00
  G4 P150
  SET_PIN PIN=Umbilical_LED VALUE=1.00
  G4 P150
  SET_PIN PIN=Umbilical_LED VALUE=0.00
  G4 P150
  SET_PIN PIN=Umbilical_LED VALUE=1.00
